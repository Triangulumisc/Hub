-- Загрузка библиотеки Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Создание окна
local Window = Rayfield:CreateWindow({
    Name = "Triangulum Hub",
    LoadingTitle = "Triangulum Hub",
    LoadingSubtitle = "by Misc",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "Big Hub"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = false
})

-- ========== Вкладка "Информация" ==========
local InfoTab = Window:CreateTab("Info", "info-circle") -- Первая вкладка

-- Функция для получения FPS
local function getFPS()
    return math.floor(1 / game:GetService("RunService").RenderStepped:Wait())
end

-- Функция для получения пинга
local function getPing()
    return math.floor(game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue())
end

-- Отображение информации
local player = game.Players.LocalPlayer
local displayName = player.DisplayName
local username = player.Name
local avatarUrl = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png"

InfoTab:CreateSection("Information")
InfoTab:CreateLabel("Place: " .. game.PlaceId)
InfoTab:CreateLabel("FPS: " .. getFPS())
InfoTab:CreateLabel("Ping: " .. getPing() .. " ms")
InfoTab:CreateLabel("Display Name: " .. displayName)
InfoTab:CreateLabel("Username: @" .. username)
InfoTab:CreateImage(avatarUrl, 100, 100) -- Аватар
InfoTab:CreateLabel("All hubs and functions in Triangulum Hub are free and are keyless. Enjoy!")

-- ========== Вкладка "Player" ==========
local PlayerTab = Window:CreateTab("Player", "user")

-- WalkSpeed Slider
local function getHumanoid()
    local plr = game.Players.LocalPlayer
    return plr.Character and plr.Character:FindFirstChildOfClass("Humanoid")
end

PlayerTab:CreateSlider({
    Name = "Walkspeed",
    Range = {0, 500},
    Increment = 1,
    Suffix = "Speed",
    CurrentValue = 16,
    Flag = "Slider1",
    Callback = function(Value)
        local hum = getHumanoid()
        if hum then
            hum.WalkSpeed = Value
        end
    end,
})

-- JumpPower Slider
PlayerTab:CreateSlider({
    Name = "Jump height",
    Range = {0, 1000},
    Increment = 1,
    Suffix = "Height",
    CurrentValue = 50,
    Flag = "Slider4",
    Callback = function(Value)
        local hum = getHumanoid()
        if hum then
            hum.JumpPower = Value
        end
    end,
})

-- TP Walk
local tpwalking = false
local tpWalkSpeed = 10
local RunService = game:GetService("RunService")

PlayerTab:CreateToggle({
    Name = "TPwalk",
    CurrentValue = false,
    Flag = "TPWalkToggle",
    Callback = function(Value)
        tpwalking = Value
        if not Value then return end
        local chr = game.Players.LocalPlayer.Character
        local hum = chr and chr:FindFirstChildOfClass("Humanoid")
        
        RunService.Heartbeat:Connect(function(delta)
            if not tpwalking then return end
            if chr and hum and hum.Parent and hum.MoveDirection.Magnitude > 0 then
                chr:TranslateBy(hum.MoveDirection * delta * tpWalkSpeed)
            end
        end)
    end
})

-- TP WalkSpeed Slider
PlayerTab:CreateSlider({
    Name = "TPwalk Speed",
    Range = {1, 1000},
    Increment = 1,
    Suffix = "Speed",
    CurrentValue = 10,
    Flag = "TPWalkSpeedSlider",
    Callback = function(Value)
        tpWalkSpeed = Value
    end,
})

-- Anti-AFK Button
PlayerTab:CreateButton({
    Name = "Anti-AFK",
    Callback = function()
        local VirtualUser = game:GetService("VirtualUser")
        game:GetService("Players").LocalPlayer.Idled:Connect(function()
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end)
        Rayfield:Notify({
            Title = "Anti-AFK Enabled",
            Content = "You will no longer be kicked for being AFK.",
            Duration = 3,
            Image = nil
        })
    end
})

-- Noclip Toggle
local noclip = false
local noclipConnection
PlayerTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        noclip = Value
        if noclip then
            Rayfield:Notify({
                Title = "Noclip Enabled",
                Content = "You can now walk through walls.",
                Duration = 3,
                Image = nil
            })
            noclipConnection = game:GetService("RunService").Stepped:Connect(function()
                if noclip then
                    local character = game.Players.LocalPlayer.Character
                    if character then
                        for _, part in pairs(character:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.CanCollide = false
                            end
                        end
                    end
                else
                    if noclipConnection then
                        noclipConnection:Disconnect()
                    end
                end
            end)
        else
            Rayfield:Notify({
                Title = "Noclip Disabled",
                Content = "You can no longer walk through walls.",
                Duration = 3,
                Image = nil
            })
            if noclipConnection then
                noclipConnection:Disconnect()
            end
        end
    end
})

-- ========== Вкладка "Visual" ==========
local VisualTab = Window:CreateTab("Visual", "eye")

-- ESP Toggle с градиентом
local espEnabled = false
local espConnections = {}
local gradientColors = {
    Color3.fromRGB(255, 98, 0),
    Color3.fromRGB(121, 9, 9),
    Color3.fromRGB(255, 239, 0)
}

local function updateESP()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            local character = player.Character
            if character then
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        local box = Instance.new("BoxHandleAdornment")
                        box.Size = part.Size
                        box.Adornee = part
                        box.AlwaysOnTop = true
                        box.ZIndex = 10
                        box.Transparency = 0.5
                        box.Color3 = gradientColors[math.random(1, 3)] -- Градиентный цвет
                        box.Parent = part
                        table.insert(espConnections, box)
                    end
                end
            end
        end
    end
end

VisualTab:CreateToggle({
    Name = "ESP",
    CurrentValue = false,
    Flag = "ESPToggle",
    Callback = function(Value)
        espEnabled = Value
        if espEnabled then
            updateESP()
            game.Players.PlayerAdded:Connect(updateESP)
            game.Players.PlayerRemoving:Connect(updateESP)
            Rayfield:Notify({
                Title = "ESP Enabled",
                Content = "Player outlines are now visible.",
                Duration = 3,
                Image = nil
            })
        else
            for _, connection in pairs(espConnections) do
                connection:Destroy()
            end
            espConnections = {}
            Rayfield:Notify({
                Title = "ESP Disabled",
                Content = "Player outlines are no longer visible.",
                Duration = 3,
                Image = nil
            })
        end
    end
})

-- X-Ray Toggle
local xrayEnabled = false
VisualTab:CreateToggle({
    Name = "X-Ray",
    CurrentValue = false,
    Flag = "XRayToggle",
    Callback = function(Value)
        xrayEnabled = Value
        if xrayEnabled then
            for _, part in pairs(workspace:GetDescendants()) do
                if part:IsA("BasePart") and part.Transparency < 1 then
                    part.LocalTransparencyModifier = 0.5
                end
            end
            Rayfield:Notify({
                Title = "X-Ray Enabled",
                Content = "You can now see through walls.",
                Duration = 3,
                Image = nil
            })
        else
            for _, part in pairs(workspace:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = 0
                end
            end
            Rayfield:Notify({
                Title = "X-Ray Disabled",
                Content = "You can no longer see through walls.",
                Duration = 3,
                Image = nil
            })
        end
    end
})

-- FBright Toggle
local fullbrightEnabled = false
VisualTab:CreateToggle({
    Name = "FullBright",
    CurrentValue = false,
    Flag = "FullBrightToggle",
    Callback = function(Value)
        fullbrightEnabled = Value
        if fullbrightEnabled then
            game:GetService("Lighting").Brightness = 2
            game:GetService("Lighting").Ambient = Color3.new(1, 1, 1)
        else
            game:GetService("Lighting").Brightness = 1
            game:GetService("Lighting").Ambient = Color3.new(0.5, 0.5, 0.5)
        end
    end
})

-- ========== Автоматическое определение игры ==========
local gameId = game.PlaceId
local MovesetsTab, RivalsTab, NDSTab, MM2Tab

if gameId == 10449761463 then -- The Strongest Battlegrounds
    MovesetsTab = Window:CreateTab("Movesets", "sword")
elseif gameId == 17625359962 then -- Rivals
    RivalsTab = Window:CreateTab("Rivals", "target")
elseif gameId == 189707 then -- Natural Disaster Survival
    NDSTab = Window:CreateTab("NDS Hubs", "cloud")
elseif gameId == 142823291 then -- Murder Mystery 2
    MM2Tab = Window:CreateTab("MM2 Hubs", "gun")
end

-- ========== Вкладка Movesets (The Strongest Battlegrounds) ==========
if MovesetsTab then
    -- Mastery Movesets Section
    local MasterySection = MovesetsTab:CreateSection("Mastery Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Mastery Saitama",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Mastery%20Saitama"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Destructive Cyborg to Mastery Genos",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Mastery%20Genos"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Deadly Ninja to Mastery Sonic",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Mastery%20Sonic"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to Mastery Garou",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Mastery-Garou/refs/heads/main/Mastery"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Blade Master to Mastery Atomic Samurai",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Mastery%20Atomic%20Samurai"))()
        end
    })

    -- Dragon Ball Based Movesets Section
    local DragonBallSection = MovesetsTab:CreateSection("Dragon Ball Based Movesets")

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to Goku",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JayXSama/ray-makk/main/GOKUTSB"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Martial Artist to Beast Gohan",
        Callback = function()
            loadstring(game:HttpGet("https://gist.githubusercontent.com/envix2759/fb04c62d5b3ed582f426ee40262b4852/raw/77d417b7c5b450dbe48a3d2e22fa05d9e84967ab/gistfile1.txt"))()
        end
    })

    -- Jujutsu Kaisen Based Movesets Section
    local JujutsuKaisenSection = MovesetsTab:CreateSection("Jujutsu Kaisen Based Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Mahito",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Mahito-Script-TSB/refs/heads/main/Mahito%20V3"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Kinji Hakari",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Hakari/refs/heads/main/Hakari%20Moveset"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Itadori Yuji",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Sukuna"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Blade Master to Yuta Okkutsu",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/damir512/AtomicToYuta/main/Protected_8122576078506000.txt"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Shibuya Arc Gojo",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/skibiditoiletfan2007/BaldyToSorcerer/refs/heads/main/LatestV2.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Strongest Of Today",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Gojo-V4/refs/heads/main/Gojo"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Strongest Of History",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/damir512/sukunasaitamav1/main/thescript",true))()
        end
    })

    -- Jojo's Bizarre Adventure Based Movesets Section
    local JojoSection = MovesetsTab:CreateSection("Jojo's Bizarre Adventure Based Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Za Hando",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/Yourfavoriteguy/ZA/refs/heads/main/hando'))()
            loadstring(game:HttpGet("https://pastebin.com/raw/xMKaxyQK"))()
            Rayfield:Notify({
                Title = "Credits",
                Content = "Made By JakeScripterz On YouTube And Angelocciwazaa On Discord",
                Duration = 3,
                Image = nil
            })
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Jotaro Kujo",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/DuckTheSecond/JotaroV1/refs/heads/main/Official",true))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Kira Yoshikage",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/heeeeloooguy/Test-guys/refs/heads/main/KIRA%20YOSHIKAGE%20SAITAMA"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to Dio Brando",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/ThanakritScript/StandUserCilent/refs/heads/main/DioBeta.lua",true))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to Enrico Pucci",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/ohiorizzlersigmer/Jojo-movesets/refs/heads/main/Garou%20to%20Pucci%20V2"))()
        end
    })

    -- Solo Leveling Based Movesets Section
    local SoloLevelingSection = MovesetsTab:CreateSection("Solo Leveling Based Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Sung Jin Woo",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/hamletirl/sunjingwoo/refs/heads/main/sunjingwoo",true))()
        end
    })

    -- Roblox Lore Movesets Section
    local RobloxLoreSection = MovesetsTab:CreateSection("Roblox Lore Movesets")

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to John Doe",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Luckyfromyoutube/JohnDoe/refs/heads/main/TSBMODEL"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Deadly Ninja to 1x1x1x1",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/1x1x1x1/refs/heads/main/1X1X1X1"))()
        end
    })

    -- Game Based Movesets Section
    local GameSection = MovesetsTab:CreateSection("Game Based Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Kratos",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Kratos/refs/heads/main/KRATOS%20BY%20JAKESCRIPTERZZZ"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to Ultrakill",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Nova2ezz/GarouToV1/refs/heads/main/GarouToV1.txt"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Blade Master to Vergil",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Nova2ezz/vergilmoveset/refs/heads/main/Protected_9080797627073616.txt"))()
        end
    })

    -- Stickman Universe Movesets Section
    local StickmanSection = MovesetsTab:CreateSection("Stickman Universe Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to KadeJ",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/KadeJ"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Jun",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Custom-Movesets-Scripts/refs/heads/main/Jun"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Shinji",
        Callback = function()
            loadstring(game:HttpGet("https://pastefy.app/8noh51xT/raw"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to KJ",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/damir512/garoukjv1maybeidk/main/Protected_2460290213750059.txt"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Blade Master to Dark Lord",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Qaiddanial2904/Main/refs/heads/main/Dark%20lord"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "KJ to JK",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/JK-Script-/refs/heads/main/JK"))()
        end
    })

    -- Troll Moveset Section
    local TrollSection = MovesetsTab:CreateSection("Troll Moveset")

    MovesetsTab:CreateButton({
        Name = "Trash Can Moveset",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/JakeScripterz/Trash-Can/refs/heads/main/Trash%20Can%20Moveset"))()
        end
    })

    -- Original Movesets Section
    local OriginalSection = MovesetsTab:CreateSection("Original Movesets")

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to VEXOR",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/VEXOR.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to FAVILLA",
        Callback = function()
            getgenv().domorph = true
            getgenv().Rate = .03
            getgenv().nocam = false
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/FAVILLA.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Hero Hunter to ARCAURA",
        Callback = function()
            getgenv().OptimizeUltimate = true
            getgenv().ReduceUltFlash = true
            getgenv().Move1Insta = true
            getgenv().LowQualityMode = true
            getgenv().BetaConsole = false
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/ARCAURA.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Brutal Demon to APOPHENIA",
        Callback = function()
            getgenv().Music = false
            getgenv().AttackQuality = 'low'
            getgenv().ConstantSpeed = true
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/main/APOPHENIA.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Deadly Ninja to VOLTA",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/VOLTA.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Blade Master to AERIS",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/FLOATING_GIRL.lua"))()
        end
    })

    -- Original Movesets Section (Star Glitcher)
    MovesetsTab:CreateButton({
        Name = "Brutal Demon to Divinity",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/SG_DEMO.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Destructive Cyborg to Purity",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/SG_DEMO.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Strongest Hero to Corruption",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/SG_DEMO.lua"))()
        end
    })

    MovesetsTab:CreateButton({
        Name = "Martial Artist to Mayhem",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Reapvitalized/TSB/refs/heads/main/SG_DEMO.lua"))()
        end
    })

    -- Manga JJK Char Section
    local MangaJJKSection = MovesetsTab:CreateSection("Manga JJK Char Movesets")

    MovesetsTab:CreateButton({
        Name = "MANGA SUKUNA Moveset",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/niki21233/undonethokunas/refs/heads/main/thokunasundone"))()
        end
    })
end

-- ========== Вкладка NDS Hubs ==========
if NDSTab then
    NDSTab:CreateButton({
        Name = "NDS Hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/KaterHub-Inc/NaturalDisasterSurvival/refs/heads/main/main.lua"))()
        end
    })
end

-- ========== Вкладка MM2 Hubs ==========
if MM2Tab then
    MM2Tab:CreateButton({
        Name = "Vertex Hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring"))()
        end
    })

    MM2Tab:CreateButton({
        Name = "YARHM Hub",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Joystickplays/psychic-octo-invention/main/yarhm.lua", false))()
        end
    })
end
